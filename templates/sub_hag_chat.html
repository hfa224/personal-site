{% extends 'base_hag_chat.html' %}

{% block content %}
<section>
		<!--aside>This doesn't always look good... it gets the text by asking the webpage for it so sometimes it's too long 
			or too short ¯\_(ツ)_/¯ same for the image so sometimes that's the wrong size too. That's coding!
		</aside -->
		<br>
		
</section>
<section>
<div class="highlight" style="min-height: 130px;">
	<button type="button" style="border: 0px;margin:0rem;float:left;padding:0px" onclick='getRandomImg()'>
		<img style="height:100px;float:left;margin:0rem;padding-right:1em" src={{ url_for('static', filename='images/hg_chat/17-50-28-149_512.webp' )}}>
	</button>
	<div style="float:none;
    display: flex; 
    flex-wrap: wrap;" id="description">Click the dice to see a random link! This doesn't always look good... it gets the text by asking the webpage for it so sometimes it's too long 
		or too short ¯\_(ツ)_/¯ same for the image so sometimes that's the wrong size too.</div>
</div>
</section>
<section>
	<script>
		let linkArray = [
			["https://marginalia.nu", "Try 'random' on this site to find some interesting sites - as it says " +
			 " 'attempts to show " +
			 "you sites you perhaps weren't aware of in favor of the sort of sites you probably already knew existed.'."],
			["https://drawing.garden","A garden :)"],
			["https://rain.computer/","A very cute personal site"],
			["https://dreamwiki.sixey.es/","Weird ascii art"],
			["https://mcmansionhell.com/","Recently rediscovered McMansion and the amazing annotated images"],
			["https://goblin-heart.net/sadgrl/magnet-poetry/","An online magnet poetry maker"],
			["https://www.pcgamer.com/the-metaverse-is-bullshit/","Enjoyed this pcgamer metaverse rant "],
			["https://www.cs.cmu.edu/~sef/sefSmiley.htm", "Simley lore"],
			["https://www.shortboxcomicsfair.com/", "The shortbox digital comics fair has an amazing selection of digital comics to browse - it starts in Oct but you can still check out the exhibitors."]
		]
		function randChoice(size) {
			return Math.floor(Math.random() * size)
		}
		function getRandomImg() {
			var randNo = randChoice(9) + 1
			var api_url = "https://api.microlink.io/?url=" + linkArray[randNo - 1][0]
			document.getElementById('random-link-api').setAttribute('api', api_url);
			document.getElementById('description').innerHTML = linkArray[randNo - 1][1];
			document.getElementById('random-link').setAttribute('href', linkArray[randNo - 1][0]);
			//document.getElementById('aside').innerHTML = descriptionArray[randNo - 1]

		}
	</script>
	<noscript>Sorry, your browser does not support JavaScript! So this button will not work :(</noscript>
</section>

<script type="module" src="../static/js/link-peek.js"></script>
<section style="height:300px">
	<template id="link-peek-template">
		<div style="float:left;margin:1rem;">
			<img data-key="data.logo.url" />
		</div>
		<div style="float:none;margin:1rem;">
			<a data-key="data.title, link"></a>
			<p data-key="data.description"></p>
		</div>
	</template>

	<link-peek id="random-link-api" api="https://api.microlink.io/?url=${link}">
		<a id="random-link" href="https://tidings.potato.horse/"></a>
	</link-peek>
</section>
<section class="highlight" >
	<details>
		<summary><b>What did I use?</b></summary>
		<p>I based the styling on moku.blog (a lot cuter than this) and link-peek, with some changes to the JavaScript
		to make the link data refresh when the link is changed.</p>
		<p>And then I realised the link-peek javascript wouldn't work where I wanted to upload this, so I ditched it
			and went back to using some simpler javascript that just displays an image I uploaded and text I wrote for each site.
		</p>
	</details>
</section>

{% endblock %}